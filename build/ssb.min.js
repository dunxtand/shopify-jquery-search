!function(a,b,c,d){var e=function(){function e(b,c,d){var e=a("<"+b+"></"+b+">");return e.addClass(c),!!d&&e.text(d),e}function f(a){var b=e("p",d.item),c=e("a").attr("href",a.url).text(a.title);return b.append(c),b}function g(a){function i(b,c){"before"===b||"after"===b||"noResults"===b?k[b]=function(){return c.call(null,a)}:"success"===b||"failure"===b?k[b]=function(b){return c.call(null,a,b)}:"displayItem"===b&&(k[b]=c)}function j(a,b){var c;"noResults"===a?c=g:"searchFailure"===a&&(c=h),c.text(b)}var g=e("P",d.failure,c.noResults),h=e("P",d.failure,c.searchFailure),k=Object.create({clear:function(){a.empty()},displayResults:function(a){a.results.length<1?k.noResults():k.displayItems(a.results)},displayItems:function(a){a.forEach(k.displayItem)},displayItem:function(b){a.append(f(b))},failure:function(c){b.console.warn(c),a.append(h)},noResults:function(){a.append(g)},setCallback:i,setMessage:j});return k}var c={noResults:"No results were found.",searchFailure:"Sorry, something went wrong."},d={failure:"ssb-failure",item:"ssb-item"};return{new:g}}(),f=function(){function c(a,c){var e="/search?",f="&q="+c,g=e+d(a)+f;return b.location.origin+g}function d(a){var b=[];return a.type&&b.push("type="+a.type),a.view&&b.push("view="+a.view),b.join("&")}function e(a){return function(b){!!a[b]&&a[b](arguments[1])}}function f(a,b){return function(a){a.fail(function(a){b("failure",a)}),a.then(function(a){b("success",a)}),a.done(function(){b("after")})}}function g(b,d){function h(e){d.clear(),g("before");var h=c(b,e),i=a.getJSON(h,d.displayResults);f(d,g)(i)}var g=e(d);return{search:h}}return{new:g}}(),g=function(){function b(b){for(var c=b.get(0);c&&"FORM"!==c.nodeName;)c=c.parentNode;return a(c)}function c(a,c){var d=b(a);d.submit(function(b){b.preventDefault(),b.stopPropagation();var d=a.val();c.search(d)})}return{new:function(a,b){return{init:function(){c(a,b)}}}}}(),h=function(){function a(a){throw new Error(a)}function b(b){"INPUT"!==b.nodeName&&a("search bar must be an input element"),b.type&&"text"===b.type||a("search bar must be of type='text'")}function c(b){for(var c=b;c&&"FORM"!==c.nodeName;)c=c.parentNode;c||a("search bar must be nested within a form element")}function d(b){b||a("Must provide a urlOpts arg"),"object"!=typeof b&&a("urlOpts must be an object"),b.view&&"string"==typeof b.view||a("urlOpts must have string 'view' property")}function e(b){b||a("Must provide a containerId arg"),"string"!=typeof b&&a("containerId must be a string")}return function(a,f,g){b(a),c(a),d(f),e(g)}}(),i=function(){function c(a,b){return function(d){return d.noResults&&b.setMessage("noResults",d.noResults),d.searchFailure&&b.setMessage("searchFailure",d.searchFailure),a}}function d(a,b){return function(d){return function(e){return b.setCallback(d,e),a}}}function i(h,i,j){function o(){var a=d(h,l);h.messages=c(h,l),[b.before,b.after,b.success,b.failure,b.displayItem,b.noResults].forEach(function(b){h[b]=a(b)})}var k,l,m,n;return k=a(j),l=e.new(k),m=f.new(i,l),n=g.new(h,m),o(),n.init(),h}var b={before:"before",after:"after",success:"success",failure:"failure",displayItem:"displayItem",noResults:"noResults"};return{shopifySearchBar:function(a,b){return h(this.get(0),a,b),i(this,a,b)}}}();a.fn.extend(i)}(jQuery,window,document);