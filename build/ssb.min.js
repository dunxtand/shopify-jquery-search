!function(a,b,c){var d=function(){function e(a,c,d){var e=b.createElement(a);return e.className=c,!!d&&(e.textContent=d),e}function f(a){var b=e("P",d.item),c="<a href='"+a.url+"'>"+a.title+"</a>";return b.innerHTML=c,b}function g(b){function i(a,c){"before"===a||"after"===a||"noResults"===a?k[a]=function(){return c.call(null,b)}:"success"===a||"failure"===a?k[a]=function(a){return c.call(null,b,a)}:"displayItem"===a&&(k[a]=c)}function j(a,b){var c;"noResults"===a?c=g:"searchFailure"===a&&(c=h),c.textContent=b}var g=e("P",d.failure,c.noResults),h=e("P",d.failure,c.searchFailure),k=a.Object.create({clear:function(){b.innerHTML=""},displayResults:function(a){a.results.length<1?k.noResults():k.displayItems(a.results)},displayItems:function(a){a.forEach(k.displayItem)},displayItem:function(a){b.appendChild(f(a))},failure:function(c){a.console.warn(c),b.appendChild(h)},noResults:function(){b.appendChild(g)},setCallback:i,setMessage:j});return k}var c={noResults:"No results were found.",searchFailure:"Sorry, something went wrong."},d={failure:"ssb-failure",item:"ssb-item"};return{new:g}}(),e=function(){function b(b,d){var e="/search?",f="&q="+d,g=e+c(b)+f;return a.location.origin+g}function c(a){var b=[];return a.type&&b.push("type="+a.type),a.view&&b.push("view="+a.view),b.join("&")}function d(a){return function(b){!!a[b]&&a[b]()}}function e(c,e){function g(b){var c=new a.XMLHttpRequest;c.open("GET",b,!0),c.onreadystatechange=function(b){if(4===c.readyState)if(200===c.status){var d=a.JSON.parse(c.responseText);f("success"),e.displayResults(d),f("after")}else e.failure(c),f("after")},c.onerror=function(a){e.failure(c),f("after")},c.send()}function h(a){var d=b(c,a);e.clear(),f("before"),g(d)}var f=d(e);return{search:h}}return{new:e}}(),f=function(){function a(a){for(var b=a;b&&"FORM"!==b.nodeName;)b=b.parentNode;return b}function b(b,c){var d=a(b);d.onsubmit=function(a){a.preventDefault(),a.stopPropagation();var d=b.value;c.search(d)}}return{new:function(a,c){return{init:function(){b(a,c)}}}}}(),g=function(){function a(a){throw new Error(a)}function b(b){b.type&&"text"===b.type||a("search bar must be of type='text'")}function c(b){for(var c=b;c&&"FORM"!==c.nodeName;)c=c.parentNode;c||a("search bar must be nested within a form element")}function d(b){b||a("Must provide a urlOpts arg"),"object"!=typeof b&&a("urlOpts must be an object"),b.view&&"string"==typeof b.view||a("urlOpts must have string 'view' property")}function e(b){b||a("Must provide a containerId arg"),"string"!=typeof b&&a("containerId must be a string")}return function(a,f,g){b(a),c(a),d(f),e(g)}}(),h=function(){function c(a,b){return function(d){return d.noResults&&b.setMessage("noResults",d.noResults),d.searchFailure&&b.setMessage("searchFailure",d.searchFailure),a}}function h(a,b){return function(d){return function(e){return b.setCallback(d,e),a}}}function i(g,i,j){function o(){var b=h(g,l);g.messages=c(g,l),[a.before,a.after,a.success,a.failure,a.displayItem,a.noResults].forEach(function(a){g[a]=b(a)})}var k,l,m,n;return k=b.getElementById(j),l=d.new(k),m=e.new(i,l),n=f.new(g,m),o(),n.init(),g}var a={before:"before",after:"after",success:"success",failure:"failure",displayItem:"displayItem",noResults:"noResults"};return function(a,b){return g(this,a,b),i(this,a,b)}}();try{var i=a.HTMLInputElement||a.document.createElement("INPUT").constructor;i.prototype.shopifySearchBar=h}catch(b){a.console.error("shopify-search-bar will not work in this browser!","Cannot access HTMLInputElement prototype:",b)}}(window,document);
