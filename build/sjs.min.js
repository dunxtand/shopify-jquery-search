var searchAPI=function(a,b,c,d){function e(b,c){return function(d){var e,h;e=g(b,d),c.before&&c.before(),h=a.getJSON(e,c.handleSuccess),f(h,c)}}function f(a,b){b.handleFailure&&a.fail(b.handleFailure),b.then&&a.then(b.then),b.done&&a.done(b.done),b.always&&a.always(b.always)}function g(a,c){var d="/search?",e="&q="+c;return b.location.origin+d+h(a)+e}function h(a){var b=[];return a.type&&b.push("type="+a.type),a.view&&b.push("view="+a.view),b.join("&")}function i(a){if(!a)throw new Error("You must provide a 'callbacks' object to the 'new' method");if(!a.handleSuccess)throw new Error("You must define a 'handleSuccess' callback in the 'callbacks' object");a.handleFailure||b.console.warn("You have not provided a 'handleFailure' method to the 'callbacks' object")}return{new:function(a,b){return i(b),{search:e(a||{},b),url:g(a,"<YOUR_QUERY>"),callbacks:b}}}}(jQuery,window,document),searchBar=function(a,b,c,d){function e(b,c){var d=a(b.form),e=a(b.input);d.submit(function(a){a.preventDefault(),a.stopPropagation();var b=e.val();c.search(b)})}function f(a,b){if(!a||!b)throw new Error("You must provide 'selectors' and 'api' objects to the 'init' method");if(!a.form||!a.input)throw new Error("You must provide 'form' and 'input' properties to the 'selectors' object")}return{new:function(b,c){return f(b,c),{init:function(){e(b,c)},form:a(b.form),input:a(b.input)}}}}(jQuery,window,document),searchResults=function(a,b,c,d){function e(b,c){function f(b,c){return function(){var e=a("<p></p>").addClass(c).text(b);d.append(e)}}var d=a(b.container),e=a(b.loadDisplay),g=Object.create({clear:function(){d.empty()},toggleLoadDisplay:function(){e.toggle()},displayResults:function(a){a.results.length<1?g.displayNoResults():g.displayItems(a.results)},displayItems:function(a){a.forEach(g.displayItem)},displayItem:function(b){var c=a("<a></a>").attr("href",b.url).text(b.title),e=a("<p></p>").append(c);d.append(e)},displaySearchFailure:f(c.searchFailure,c.searchFailureClass),displayNoResults:f(c.noResults,c.noResultsClass)});return g}function f(a,b){if(!a||!b)throw new Error("You must provide 'selectors' and 'messages' objects to the 'new' method");if(!a.container||!a.loadDisplay)throw new Error("You must provide 'container' and 'loadDisplay' selectors in the 'selectors' object");if(!b.noResults||!b.noResultsClass)throw new Error("You must provide a 'noResults' message and a corresponding 'noResultsClass' in the 'messages' object");if(!b.searchFailure||!b.searchFailureClass)throw new Error("You must provide a 'searchFailure' message and a corresponding 'searchFailureclass' to the 'messages' object")}return{new:function(a,b){return f(a,b),e(a,b)}}}(jQuery,window,document);
